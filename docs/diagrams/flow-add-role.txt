participant vmc
participant cc
participant cs

vmc->cc: add_role(token, org, proj, rolename, users, (resspec, permset)[])
note over vmc: 
    a resspec can specify specify resources 
    by type and name like "service/mydb",
    or just by type "service"
end note
cc->cs: add_role(token, org, proj, rolename, users, (resspec, permset)[])
note over cs:
    get ACLs for org, proj
    check_authorized(token, acls, 
    perm => update, restype => proj, 
    resname => self)
    if yes, create_role(org, proj, 
        rolename, users, (resspec, 
        permset)[])
end note
cs->cc: 
cc->vmc:
